<ion-header class="header-color">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button icon="chevron-back-outline">
      </ion-back-button>
    </ion-buttons>
    <ion-title><ion-label class="capitelize">
      </ion-label> Operation </ion-title>
    <ion-buttons slot="end">
      <ion-button fill="clear" (click)="onSubmitFired()">
        <fa-icon icon="save"></fa-icon></ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content [fullscreen]="true" *ngIf="operation as op" class="ion-padding">

  <div style="padding-top: 3%;">
    <form [formGroup]="operationForm">
      <!-- <ng-template matStepLabel>Name</ng-template> -->
      <mat-form-field class="example-full-width">
        <mat-label>Date</mat-label>
        <input matInput placeholder="Date" readonly formControlName="time">

        <button id="open-leaf" mat-mini-fab matSuffix aria-label="Date" (click)="isOpen = true">
          <mat-icon color="primary">calendar_month</mat-icon>
        </button>

      </mat-form-field>

      <mat-form-field class="example-full-width">
        <mat-label>statut</mat-label>
        <input matInput placeholder="Statut" readonly formControlName="statut">

      </mat-form-field>

      <mat-form-field class="example-full-width">
        <mat-label>Description</mat-label>
        <input matInput placeholder="Description" formControlName="description">
        <mat-error *ngIf="operationForm.get('description')?.hasError('required')">
          Description is required!
        </mat-error>
      </mat-form-field>
      <mat-form-field class="example-full-width" *ngIf="showDebitField">
        <mat-label>{{'forms.operation.'+accountType+'.debit' | translate}}</mat-label>
        <input matInput type="number" formControlName="debit" placeholder="0" step="0.01"
          (change)="debitChanged($event)">
        <span class="prefix-currency" matTextPrefix>$&nbsp;</span>

      </mat-form-field>

      <mat-form-field class="example-full-width" *ngIf="showCreditField">
        <mat-label>{{'forms.operation.'+accountType+'.credit' | translate}}</mat-label>
        <input matInput type="number" formControlName="credit" placeholder="0" step="0.01"
          (change)="creditChanged($event)">
        <span class="prefix-currency" matTextPrefix>$&nbsp;</span>
      </mat-form-field>
    </form>
  </div>

  <div class="ion-padding form-tool">

    <button mat-raised-button color="primary" (click)="submit()" style="float: right;">SUBMIT</button>
  </div>

  <ion-modal [isOpen]="isOpen">
    <ng-template>

      <ion-content class="ion-padding">
        <ion-datetime #datetime [showDefaultButtons]="true" (ionCancel)="cancel()"
          [value]="operation.time | dateHissab  " (ionChange)="onDateChange(datetime.value)"></ion-datetime>
      </ion-content>
    </ng-template>
  </ion-modal>
</ion-content>